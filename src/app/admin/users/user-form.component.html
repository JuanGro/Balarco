<div class="modal-body">
    <!-- Start form -->
    <!-- #userModalForm="ngForm" calls the form methods to the component -->
    <!-- (ngSubmit)="submitUserForm(userModalForm.value)" executes the submitUserForm method sending the values of each field -->
    <form #userModalForm="ngForm" novalidate (ngSubmit)="submitUserForm(userModalForm, userModalForm.value)">

        <!-- First row -->
        <div class="form-group row">
            <div class="col-md-12" [class.has-success]="!username.errors && username.touched" [class.has-danger]="username.errors && username.touched">
                <!-- Username field -->
                <label for="recipient-name" class="form-control-label">Correo:</label>
                <div class="input-group">
                    <span class="input-group-addon"><i class="icon-user"></i>
                </span>
                    <input type="text" id="recipient-name" placeholder="usuario@balarco.com" class="form-control" minlength="3" maxlength="50" name="username" [(ngModel)]="user.username" #username="ngModel" pattern="[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+/=?^_`\{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"
                        [class.form-control-success]="!username.errors && username.touched" [class.form-control-danger]="username.errors && username.touched" required>
                </div>
                <!-- Feedback name -->
                <div *ngIf="username.errors && username.touched">
                    <div [hidden]="!username.errors.required">
                        <div class="form-control-feedback">El correo es obligatorio.</div>
                    </div>
                    <div [hidden]="!username.errors.minlength">
                        <div class="form-control-feedback">El correo debe ser mayor o igual a 3 caracteres.</div>
                    </div>
                    <div [hidden]="!username.errors.maxlength">
                        <div class="form-control-feedback">El correo debe ser menor a 25 caracteres.</div>
                    </div>
                    <div [hidden]="!username.errors.pattern">
                        <div class="form-control-feedback">El correo no es válido.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Second row -->
        <div class="form-group row">
            <div class="col-md-6" [class.has-success]="!first_name.errors && first_name.touched" [class.has-danger]="first_name.errors && first_name.touched">
                <!-- Lastname field -->
                <label for="recipient-first_name" class="form-control-label">Nombre:</label>
                <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-user"></i>
                </span>
                    <input type="text" id="recipient-first_name" placeholder="Juan" class="form-control" minlength="3" maxlength="24" name="first_name" [(ngModel)]="user.first_name" #first_name="ngModel" [class.form-control-success]="!first_name.errors && first_name.touched"
                        [class.form-control-danger]="first_name.errors && first_name.touched" required>
                </div>
                <!-- Feedback lastname -->
                <div *ngIf="first_name.errors && first_name.touched">
                    <div [hidden]="!first_name.errors.required">
                        <div class="form-control-feedback">El nombre es obligatorio.</div>
                    </div>
                    <div [hidden]="!first_name.errors.minlength">
                        <div class="form-control-feedback">El nombre debe ser mayor o igual a 3 caracteres.</div>
                    </div>
                    <div [hidden]="!first_name.errors.maxlength">
                        <div class="form-control-feedback">El nombre debe ser menor a 25 caracteres.</div>
                    </div>
                </div>
            </div>

            <div class="col-md-6" [class.has-success]="!last_name.errors && last_name.touched" [class.has-danger]="last_name.errors && last_name.touched">
                <!-- Lastname field -->
                <label for="recipient-last_name" class="form-control-label">Apellido:</label>
                <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-user"></i>
                </span>
                    <input type="text" id="recipient-last_name" placeholder="Hernández" class="form-control" minlength="3" maxlength="24" name="last_name" [(ngModel)]="user.last_name" #last_name="ngModel" [class.form-control-success]="!last_name.errors && last_name.touched"
                        [class.form-control-danger]="last_name.errors && last_name.touched" required>
                </div>
                <!-- Feedback lastname -->
                <div *ngIf="last_name.errors && last_name.touched">
                    <div [hidden]="!last_name.errors.required">
                        <div class="form-control-feedback">El apellido es obligatorio.</div>
                    </div>
                    <div [hidden]="!last_name.errors.minlength">
                        <div class="form-control-feedback">El apellido debe ser mayor o igual a 3 caracteres.</div>
                    </div>
                    <div [hidden]="!last_name.errors.maxlength">
                        <div class="form-control-feedback">El apellido debe ser menor a 25 caracteres.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Third row -->
        <div *ngIf="!user.id" class="form-group row">
            <div class="col-md-12" [class.has-success]="!password.errors && password.touched" [class.has-danger]="password.errors && password.touched">
                <!-- Password field -->
                <label for="recipient-landline" class="form-control-label">Password:</label>
                <div class="input-group">
                    <span class="input-group-addon"><i class="icon-lock"></i>
                </span>
                    <input type="password" class="form-control" id="recipient-password" minlength="7" maxlength="24" name="password" [(ngModel)]="user.password" #password="ngModel" [class.form-control-success]="!password.errors && password.touched" [class.form-control-danger]="password.errors && password.touched"
                        required>
                </div>
                <!-- Feedback password -->
                <div *ngIf="password.errors && password.touched">
                    <div [hidden]="!password.errors.required">
                        <div class="form-control-feedback">La contraseña es obligatoria.</div>
                    </div>
                    <div [hidden]="!password.errors.minlength">
                        <div class="form-control-feedback">La contraseña debe ser mayor o igual a 6 caracteres.</div>
                    </div>
                    <div [hidden]="!password.errors.maxlength">
                        <div class="form-control-feedback">La contraseña debe ser menor a 25 caracteres.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Fourth row -->
        <!-- NG2-SELECT -->
        <div class="row">
            <div class="col-md-12">
                <label for="recipient-assignments" class="form-control-label">Roles:</label>
                <ng-select #roles [multiple]="true" [items]="groupStringList" (data)="refreshValue($event)" (selected)="selected($event)" (removed)="removed($event)" placeholder="No groups selected">
                </ng-select>
                <br/>
                <!-- Current roles selected -->
                <pre class="alert alert-info">{{ itemsToString(currentGroupNameList) }}</pre>
            </div>
        </div>

        <!-- Buttons -->
        <div class="modal-footer">
            <!-- Clear form -->
            <!-- Calls the resetForm method, it's only displayed if the user.id is empty because it's not used for create a new user modal -->
            <!-- <button *ngIf="!user.id" type="reset" class="btn btn-danger" (click)="cancelForm()">Limpiar</button> -->
            <!-- Delete user -->
            <!-- Calls the requestWarningModal method, the confirmation is only displayed if the user.id exists because it's used only for update user modal -->
            <button *ngIf="user.id" type="button" class="btn btn-danger" (click)="requestWarningModal($event)">Eliminar</button>
            <!-- Hides modal -->
            <button type="button" class="btn btn-secondary" (click)="requestCloseThisModal($event)" (click)="cancelForm(userModalForm)">Cancelar</button>
            <!-- Submits updated or new user -->
            <!-- Calls the submitUserForm method, the submit button is only displayed if all the fields are valid and at least one group is selected, then it closes the current modal -->
            <button type="submit" class="btn btn-primary" [disabled]="!userModalForm.form.valid || userGroupsComplete.length < 1" (click)="requestCloseThisModal($event)">Guardar</button>
        </div>

    </form>
</div>